{% extends 'base.html' %}
{% load static %}
{% block content %}
    <h1 style="text-align: left">Profile Details</h1>

    <div class="info-container">

        <div class="image-container">
            {% if user.profile.profile_picture %}
                <img src="{{ user.profile.profile_picture }}">
            {% else %}
                <img src="{% static 'images/no-profile-image.jpg' %}">
            {% endif %}
        </div>

        <div class="more-info-container">
            <h3>Full Name: {{ user.profile.get_full_name }}</h3>
            <h3>Is creator:<br>{{ user.is_creator }}</h3>
            <h3>More Information:<br>{{ user.profile.get_bio }}</h3>
        </div>

        {% if request.user == user %}

            <div class="buttons-container">
                <form method="post" action="{% url 'logout' %}">
                    {% csrf_token %}
                    <button class="profile-button logout-button" type="submit"><i
                            class="fa-solid fa-right-from-bracket"></i> Logout
                    </button>
                </form>
                <a class="profile-button" href="{% url 'profile-edit' request.user.pk %}"><i
                        class="fa-regular fa-pen-to-square"></i> Edit</a>
                <a class="profile-button" href="{% url 'profile-delete' request.user.pk %}"><i
                        class="fa-solid fa-trash-can"></i> Delete</a>
            </div>
        {% endif %}

    </div>

    <h1 style="text-align: left">Published Gifts</h1>

    {% if user.is_creator and user.giftcreator.gifts.count > 0 %}

        <ul class="posts-container">
            {% for gift in user.giftcreator.gifts.all|slice:":3" %}
                <a href="" class="post-card">
                    <h2>Title: {{ gift.title }}</h2>
                    <img src="{{ gift.image }}" width="60px" height="60px">
                    <p>Description: {{ gift.description }}</p>
                    <p>Price: {{ gift.price }}</p>
                </a>
            {% endfor %}
            {% if user.giftcreator.gifts.count > 1 %}
                <a href="{% url 'published-gifts' user.pk %}">Load more gifts...</a>
            {% endif %}
        </ul>
    {% else %}
        <h3 style="text-align: left">There are no published gifts yet.</h3>
    {% endif %}
{% endblock %}